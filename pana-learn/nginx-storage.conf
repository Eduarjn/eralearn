server {
    listen 80;
    server_name localhost;
    
    # Configurar CORS
    add_header Access-Control-Allow-Origin *;
    add_header Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS";
    add_header Access-Control-Allow-Headers "Origin, X-Requested-With, Content-Type, Accept, Authorization";
    
    # Root para arquivos estáticos
    root /usr/share/nginx/html;
    
    # Servir arquivos estáticos
    location / {
        try_files $uri $uri/ =404;
        
        # Headers para vídeos
        location ~* \.(mp4|webm|ogg|avi|mov)$ {
            add_header Accept-Ranges bytes;
            add_header Cache-Control "public, max-age=3600";
        }
        
        # Headers para imagens
        location ~* \.(jpg|jpeg|png|gif|ico|svg)$ {
            add_header Cache-Control "public, max-age=86400";
        }
    }
    
    # API endpoints para simular Supabase Storage
    location /storage/v1/object/public/ {
        rewrite ^/storage/v1/object/public/(.*)$ /$1 last;
    }
    
    # Endpoint para listar buckets
    location /storage/v1/bucket {
        return 200 '[]';
        add_header Content-Type application/json;
    }
}



















